# serializer version: 1
# name: test_dot_graph_output[empty-\n.data\n    .float 1\nbuff: .space 1024\n.text\n_start:\n    ret\n][empty_dot]
  '''
  // --- Function: _start ---
  digraph asm_flow {
      node [shape=box fontname="Courier"];
      // Edge definitions: Green=Condition Met (e.g. je), Red=Condition Not Met (e.g. jne)
      "_start" [label="_start\n----------------\nret\l"];
  }
  '''
# ---
# name: test_dot_graph_output[merge_arrays-\n.text\n.global merge_arrays\n.equ SAVED_REGISTERS, 3\n.equ src1, SAVED_REGISTERS*4 + 4\n.equ len1, src1+4\n.equ src2, len1+4\n.equ len2, src2+4\n.equ dest, len2+4\nmerge_arrays:\n    pushl %ebp\n    pushl %esi\n    pushl %edi\n    movl  %esp, %ebp\n\n    xorl %esi,   %esi # src1Counter\n    xorl %edi, %edi # src2Counter\n    xorl %edx, %edx # destCounter\n\nloop:\n    cmpl len1(%ebp), %esi\n    jge  pick2\n\n\n    cmpl len2(%ebp), %edi\n    jge  pick1\n\n    movl src1(%ebp), %eax // another comment\n    movl (%eax, %esi, 4), %ecx # random comment\n\n    movl src2(%ebp), %eax\n    cmpl (%eax, %edi, 4), %ecx\n\n    jge pick2\n\npick1:\n    cmpl len1(%ebp), %esi\n    jge  return\n\n    movl src1(%ebp), %eax\n    movl (%eax, %esi, 4), %ecx\n\n    movl dest(%ebp), %eax\n    movl %ecx, (%eax, %edx, 4)\n    \n    incl %esi\n    incl %edx\n    jmp  loop\n\npick2:\n    cmpl len2(%ebp), %edi\n    jge  return\n\n    movl src2(%ebp), %eax\n    movl (%eax, %edi, 4), %ecx\n\n    movl dest(%ebp), %eax\n    movl %ecx, (%eax, %edx, 4)\n    \n    incl %edi\n    incl %edx\n    jmp  loop\n\nreturn:\n    movl %ebp, %esp\n    popl %edi\n    popl %esi\n    popl %ebp\n    ret\n][merge_arrays_dot]
  '''
  // --- Function: merge_arrays ---
  digraph asm_flow {
      node [shape=box fontname="Courier"];
      // Edge definitions: Green=Condition Met (e.g. je), Red=Condition Not Met (e.g. jne)
      "merge_arrays" [label="merge_arrays\n----------------\npushl %ebp\lpushl %esi\lpushl %edi\lmovl %esp, %ebp\lxorl %esi, %esi\lxorl %edi, %edi\lxorl %edx, %edx\l"];
      "merge_arrays" -> "loop" [color="black"];
      "loop" [label="loop\n----------------\ncmpl len1(%ebp), %esi\l"];
      "loop" -> "loc_25" [color="green" label="jl" fontcolor="green"];
      "loop" -> "pick2" [color="red" label="jge" fontcolor="red"];
      "loc_25" [label="loc_25\n----------------\ncmpl len2(%ebp), %edi\l"];
      "loc_25" -> "loc_28" [color="green" label="jl" fontcolor="green"];
      "loc_25" -> "pick1" [color="red" label="jge" fontcolor="red"];
      "pick2" [label="pick2\n----------------\ncmpl len2(%ebp), %edi\l"];
      "pick2" -> "loc_54" [color="green" label="jl" fontcolor="green"];
      "pick2" -> "return" [color="red" label="jge" fontcolor="red"];
      "loc_28" [label="loc_28\n----------------\nmovl src1(%ebp), %eax\lmovl 0(%eax,%esi,4), %ecx\lmovl src2(%ebp), %eax\lcmpl 0(%eax,%edi,4), %ecx\l"];
      "loc_28" -> "pick1" [color="green" label="jl" fontcolor="green"];
      "loc_28" -> "pick2" [color="red" label="jge" fontcolor="red"];
      "pick1" [label="pick1\n----------------\ncmpl len1(%ebp), %esi\l"];
      "pick1" -> "loc_40" [color="green" label="jl" fontcolor="green"];
      "pick1" -> "return" [color="red" label="jge" fontcolor="red"];
      "loc_54" [label="loc_54\n----------------\nmovl src2(%ebp), %eax\lmovl 0(%eax,%edi,4), %ecx\lmovl dest(%ebp), %eax\lmovl %ecx, 0(%eax,%edx,4)\lincl %edi\lincl %edx\ljmp loop\l"];
      "loc_54" -> "loop" [color="black"];
      "return" [label="return\n----------------\nmovl %ebp, %esp\lpopl %edi\lpopl %esi\lpopl %ebp\lret\l"];
      "loc_40" [label="loc_40\n----------------\nmovl src1(%ebp), %eax\lmovl 0(%eax,%esi,4), %ecx\lmovl dest(%ebp), %eax\lmovl %ecx, 0(%eax,%edx,4)\lincl %esi\lincl %edx\ljmp loop\l"];
      "loc_40" -> "loop" [color="black"];
  }
  '''
# ---
# name: test_dot_graph_output[multi_func-\n.text\n.global main\n\nmain:\n    movl $10, %eax\n    call helper_func\n\n    xorl %ecx, %ecx\nlp:\n    pushl %ecx\n    incl %ecx\n    cmpl %eax, %ecx\n    jb lp\n\n    addl $40, %esp\n\n    xorl %eax, %eax\n    ret\n\nhelper_func:\n    cmpl $5, %eax\n    jge  big_num\n\n    addl $5, %eax\n    ret\n\nbig_num:\nbig_num1:\n    subl $1, %eax\n    ret\n][multi_func_dot]
  '''
  // --- Function: main ---
  digraph asm_flow {
      node [shape=box fontname="Courier"];
      // Edge definitions: Green=Condition Met (e.g. je), Red=Condition Not Met (e.g. jne)
      "main" [label="main\n----------------\nmovl $(10), %eax\lcall helper_func\lxorl %ecx, %ecx\l"];
      "main" -> "lp" [color="black"];
      "lp" [label="lp\n----------------\npushl %ecx\lincl %ecx\lcmpl %eax, %ecx\l"];
      "lp" -> "lp" [color="green" label="jb" fontcolor="green"];
      "lp" -> "loc_16" [color="red" label="jae" fontcolor="red"];
      "loc_16" [label="loc_16\n----------------\naddl $(40), %esp\lxorl %eax, %eax\lret\l"];
  }
  
  // --- Function: helper_func ---
  digraph asm_flow {
      node [shape=box fontname="Courier"];
      // Edge definitions: Green=Condition Met (e.g. je), Red=Condition Not Met (e.g. jne)
      "helper_func" [label="helper_func\n----------------\ncmpl $(5), %eax\l"];
      "helper_func" -> "loc_25" [color="green" label="jl" fontcolor="green"];
      "helper_func" -> "big_num" [color="red" label="jge" fontcolor="red"];
      "loc_25" [label="loc_25\n----------------\naddl $(5), %eax\lret\l"];
      "big_num" [label="big_num\n----------------\n\l"];
      "big_num" -> "big_num1" [color="black"];
      "big_num1" [label="big_num1\n----------------\nsubl $(1), %eax\lret\l"];
  }
  '''
# ---
